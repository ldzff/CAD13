# RobTeach 软件用户手册

## 1. 简介

RobTeach 是一款用于机器人示教的软件，可以帮助用户通过加载 DXF 文件来创建和配置机器人的喷涂轨迹。

## 2. 主要功能

-   加载和显示 DXF 文件。
-   创建和管理多个喷涂遍数。
-   为每个遍数添加和排序喷涂轨迹。
-   为每个轨迹配置喷嘴参数（气体和液体）。
-   为线段和圆弧设置Z轴坐标。
-   通过 Modbus 与机器人进行通信，发送配置并控制测试运行。

## 3. 界面说明

### 3.1. CAD画布

- 显示从DXF文件加载的几何图形。
- **选择**：单击或者点击鼠标左键并拖动覆盖一个实体以将其选为轨迹。
- **取消选择**：shift+鼠标左键拖动已经被选中的实体，则会取消该实体的选择。
- **缩放**：使用鼠标滚轮。
- **平移**：按住鼠标中键或Ctrl +鼠标左键并拖动。
- **框选**：单击并拖动以选择多个实体。

### 3.2 主菜单栏

-   **加载DXF (Load DXF)**: 点击此按钮可以打开文件对话框，选择并加载一个 `.dxf` 文件。加载后，DXF 图形将显示在主画布上。
-   **保存配置 (Save Config)**: 将当前的喷涂配置（包括遍数、轨迹、喷嘴设置等）保存到一个 `.json` 文件中。
-   **加载配置 (Load Config)**: 从一个 `.json` 文件中加载之前保存的喷涂配置。
-   **适应视图 (Fit to View)**: 调整画布的缩放和平移，使得整个 DXF 图形能够完整地显示在画布中。
-   **语言选择 (Language ComboBox)**: 选择软件的显示语言（英语或中文）。

### 3.3 喷涂遍数管理 (Spray Pass Management)

-   **可用遍数 (Available Passes)**: 列表框，显示当前配置中所有的喷涂遍数。
-   **添加 (Add Pass)**: 在可用遍数列表中添加一个新的喷涂遍数。
-   **移除 (Remove Pass)**: 从可用遍数列表中移除选中的喷涂遍数。
-   **重命名 (Rename Pass)**: 重命名选中的喷涂遍数。

### 3.4 轨迹顺序 (Trajectory Sequence)

-   **执行顺序 (Execution Order)**: 列表框，显示当前选中的喷涂遍数中的所有轨迹。
-   **上移 (Move Up)**: 将选中的轨迹在执行顺序中向上移动。
-   **下移 (Move Down)**: 将选中的轨迹在执行顺序中向下移动。

### 3.5 选定轨迹 - 喷嘴设置 (Selected Trajectory - Nozzle Settings)

-   **上喷嘴 (Upper Nozzle)** / **下喷嘴 (Lower Nozzle)**:
    -   **气体开启 (Gas On)**: 控制相应喷嘴的气体是否开启。
    -   **石墨水开启 (Liquid On)**: 控制相应喷嘴的石墨水是否开启。

### 3.6 选定轨迹 - 几何形状 (Selected Trajectory - Geometry)

-   **反转方向 (Reverse Direction)**: 反转选中的轨迹（线段或圆弧）的方向。
-   **Z:**:
    -   当选中的是 **线段** 时，设置线段的Z坐标（起点和终点将使用相同的值）。
    -   当选中的是 **圆弧** 或 **圆** 时，设置其Z坐标。
-   **运行时间 (Runtime (s))**: 设置机器人执行该轨迹所需的时间。

### 3.7 测试运行控制 (Test Run Control)

-   **速度模式 (Speed Mode)**:
    -   **慢速 (Slow Speed)**: 选择慢速测试运行模式。
    -   **标准速度 (Standard Speed)**: 选择标准速度测试运行模式。
-   **开始测试运行 (Start Test Run)**: 在选定的速度模式下开始测试运行。

### 3.8 Modbus 面板

-   **Modbus IP**: 输入机器人的 Modbus IP 地址。
-   **端口 (Port)**: 输入机器人的 Modbus 端口号。
-   **连接 (Connect)**: 连接到指定 IP 地址和端口的机器人。
-   **断开 (Disconnect)**:断开与机器人的连接。
-   **发送到机器人 (Send to Robot)**: 将当前的喷涂配置发送到机器人。

## 4. 使用流程

1.  点击 **加载DXF** 按钮，加载一个 DXF 文件。
2.  在 **喷涂遍数管理** 中，创建所需的喷涂遍数。
3.  在主画布上点击选择图形基元（线、圆、圆弧），将其作为轨迹添加到当前选中的喷涂遍数中。
4.  在 **轨迹顺序** 中，调整轨迹的执行顺序。
5.  选中某个轨迹，在 **喷嘴设置** 和 **几何形状** 中配置其参数。
6.  在 **Modbus 面板** 中，输入机器人的 IP 地址和端口号，然后点击 **连接**。
7.  连接成功后，点击 **发送到机器人**，将配置发送到机器人。
8.  在 **测试运行控制** 中，选择速度模式，然后点击 **开始测试运行**。
